(function(i,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("number-flow/lite"),require("esm-env"),require("number-flow/plugins")):typeof define=="function"&&define.amd?define(["exports","vue","number-flow/lite","esm-env","number-flow/plugins"],e):(i=typeof globalThis<"u"?globalThis:i||self,e(i["number-flow-vue"]={},i.Vue,i.NumberFlowLite,i.Env,i.plugins))})(this,function(i,e,t,u,S){"use strict";const $=String.raw;u.BROWSER&&(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),u.BROWSER&&typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),u.BROWSER&&typeof matchMedia<"u"&&matchMedia("(prefers-reduced-motion: reduce)");const T="--_number-flow-d-opacity",P="--_number-flow-d-width",v="--_number-flow-dx",M="--_number-flow-d";(()=>{try{return CSS.registerProperty({name:T,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:v,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:P,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:M,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})();const w="var(--number-flow-char-height, 1em)",p="round(nearest, calc(var(--number-flow-mask-height, 0.25em) / 2), 1px)",d=`calc(${p} * 2)`,k="var(--number-flow-mask-width, 0.5em)",m=`calc(${k} / var(--scale-x))`,g="#000 0, transparent 71%",C=$`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${w} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${P}) / var(--width));transform:translateX(var(${v})) scaleX(var(--scale-x));margin:0 calc(-1 * ${k});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${m},#000 calc(100% - ${m}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${d},#000 calc(100% - ${d}),transparent 100% ),radial-gradient(at bottom right,${g}),radial-gradient(at bottom left,${g}),radial-gradient(at top left,${g}),radial-gradient(at top right,${g});-webkit-mask-size:100% calc(100% - ${d} * 2),calc(100% - ${m} * 2) 100%,${m} ${d},${m} ${d},${m} ${d},${m} ${d};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${p} ${k};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${v})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${M})}.digit__num,.number .section::after{padding:${p} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${T}))}`,R=$`:host{display:inline-block;direction:ltr;white-space:nowrap;line-height:${w} !important}span{display:inline-block}:host([data-will-change]) span{will-change:transform}.number,.digit{padding:${p} 0}.symbol{white-space:pre}`,j=(n="")=>$`number-flow${n} > span{font-kerning:none;display:inline-block;line-height:${w} !important;padding:${d} 0}`,B=n=>[R,j(n),C],_=Symbol(),E=e.defineComponent({__name:"NumberFlowGroup",setup(n){const c=new Set;let l=!1;const o=(s,f)=>{c.add(s),e.watch(f,async()=>{l||(l=!0,c.forEach(async a=>{var h;!a.value||!a.value.created||(a.value.willUpdate(),await e.nextTick(),(h=a.value)==null||h.didUpdate())}),await e.nextTick(),l=!1)}),e.onUnmounted(()=>{c.delete(s)})};return e.provide(_,o),(s,f)=>e.renderSlot(s.$slots,"default")}}),x=["batched","trend","plugins","animated","transformTiming","spinTiming","opacityTiming","respectMotionPreference","nonce","data-will-change","digits","innerHTML","data"],O=e.defineComponent({inheritAttrs:!1,__name:"index",props:{transformTiming:{default:()=>t.defaultProps.transformTiming},spinTiming:{default:()=>t.defaultProps.spinTiming},opacityTiming:{default:()=>t.defaultProps.opacityTiming},animated:{type:Boolean,default:()=>t.defaultProps.animated},respectMotionPreference:{type:Boolean,default:()=>t.defaultProps.respectMotionPreference},trend:{type:[Number,Function],default:()=>t.defaultProps.trend},plugins:{default:()=>t.defaultProps.plugins},digits:{default:()=>t.defaultProps.digits},locales:{},format:{},value:{},prefix:{},suffix:{},nonce:{},willChange:{type:Boolean,default:!1}},emits:["animationsstart","animationsfinish"],setup(n,{expose:c,emit:l}){const o=e.ref();c({el:o});const s=l,f=e.computed(()=>new Intl.NumberFormat(n.locales,n.format)),a=e.computed(()=>t.formatToData(n.value,f.value,n.prefix,n.suffix)),h=u.BROWSER?void 0:t.renderInnerHTML(a.value,{nonce:n.nonce,elementSuffix:"-vue"}),y=e.inject(_,void 0);return y==null||y(o,a),(r,b)=>(e.openBlock(),e.createElementBlock("number-flow-vue",e.mergeProps({ref_key:"el",ref:o},r.$attrs,{batched:!!e.unref(y),trend:r.trend,plugins:r.plugins,animated:r.animated,transformTiming:r.transformTiming,spinTiming:r.spinTiming,opacityTiming:r.opacityTiming,respectMotionPreference:r.respectMotionPreference,nonce:r.nonce,"data-will-change":r.willChange?"":void 0,digits:r.digits,innerHTML:e.unref(h),"data-allow-mismatch":"",onAnimationsstart:b[0]||(b[0]=W=>s("animationsstart")),onAnimationsfinish:b[1]||(b[1]=W=>s("animationsfinish")),data:a.value}),null,16,x))}}),A=B("-vue");t.define("number-flow-vue",t);function V({respectMotionPreference:n=!0}={}){const c=e.ref(!1),l=e.ref(!1);return e.onMounted(()=>{var o;c.value=t.canAnimate,l.value=((o=t.prefersReducedMotion)==null?void 0:o.matches)??!1}),e.watchEffect(o=>{var f;if(!e.toValue(n))return;const s=({matches:a})=>{l.value=a};(f=t.prefersReducedMotion)==null||f.addEventListener("change",s),o(()=>{var a;(a=t.prefersReducedMotion)==null||a.removeEventListener("change",s)})}),e.computed(()=>c.value&&(!e.toValue(n)||!l.value))}i.NumberFlowElement=t,i.NumberFlowGroup=E,i.default=O,i.styles=A,i.useCanAnimate=V,Object.keys(S).forEach(n=>{n!=="default"&&!Object.prototype.hasOwnProperty.call(i,n)&&Object.defineProperty(i,n,{enumerable:!0,get:()=>S[n]})}),Object.defineProperties(i,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
